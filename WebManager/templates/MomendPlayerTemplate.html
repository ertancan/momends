{% load url from future %}

<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{% block title %} Momends {% endblock title %}</title>

{% block include %}
    <link href="{{ STATIC_URL }}fonts/font-awesome/font-awesome.css" rel="stylesheet">
    <!--[if IE 7]>
		    <link href={{ STATIC_URL }}fonts/font-awesome/font-awesome-ie7.css" rel="stylesheet">
	    <![endif]-->
    <script src="{{ STATIC_URL }}jquery.js"></script>
    <link href="{{ STATIC_URL }}momend_style.css" rel="stylesheet" type="text/css" />
    <link href="{{ STATIC_URL }}player_style.css" rel="stylesheet" type="text/css" />
    <script>STATIC_URL = '{{ STATIC_URL }}';  </script>
    <script>MOMEND_FILE_URL = '{{ MOMEND_FILE_URL }}';  </script>
{% endblock include %}
</head>

<body>
{% block heading %} {% endblock heading %}
{% block content %}
    <body onload="player_init()">
    <div class="player" style="width:100%;height: 100%">
        <div class="scene" style="height: 97%"></div>
        <div class="music"></div>
        <div class="momend-player" style="height: 3%">
            <button onclick="pause()" id="play-toggle" class="btn btn-mini player-button"><i id="toggle-icon" class="icon-pause"></i></button>
            <div class="slider-bg">
                <input id="volume-slider" type="range" min="0" max="100" style="width: 100px">
            </div>
            <div class="momend-button-group pull-right">
                <button class="icon-heart player-button" href="#"></button>
                <button class="icon-share player-button" href="#"></button>
                <button class="icon-fullscreen player-button" href="#" id="button-fullscreen"></button>
            </div>
        </div>
    </div>
    {% csrf_token %}

{% endblock content %}

{% block scripts %}

    <script src="{{ STATIC_URL }}jquery.jplayer.min.js"></script>
    <script src="{{ STATIC_URL }}jquery.transit.min.js"></script>
    <script src="{{ STATIC_URL }}animation.js"></script>
    <script src="{{ STATIC_URL }}momend.js"></script>

    <script type="text/javascript">
        function fetch_momend_data(){
            $.getJSON( '{% url 'momends:get-momend' params.type params.id %}', function(data) {
                momend_data = data;
                momend_arrived();
                create_finish_view();
            }).error(function(){load_failed();});
        }
        function send_interaction_data(){
            _sendUserInteractionToServer('{% url 'momends:save-interaction' params.id %}')
        }
        function player_init(){
            init_animation();
            fetch_momend_data();
        }
    </script>
{% endblock scripts %}

