{% extends "MainSite.html" %}
{% load url from future %}

{% block include%}
    <link href="{{ STATIC_URL }}main.css" rel="stylesheet" media="screen">
{% endblock include %}

{% block content %}
    <div class="lead-container">
        <div class="container">

            <div id="carousel" class="carousel slide macbook" rel="carousel" data-interval="15000">
                <img src="{{ STATIC_URL }}img/carousel-macbook.png" class="carousel-macbook" alt="" />
                <!-- Carousel items -->
                <div class="carousel-inner">
                    <div class="item active homepage-carousel-item" id="yt-container">
                        <div class="video_container" id="video_container">
                            <iframe width="515" height="306" src="http://www.youtube.com/embed/dVZpm0okAH8?rel=0&showinfo=0&controls=0" frameborder="0" allowfullscreen></iframe>
                        </div>
                    </div>
                    <div class="item homepage-carousel-item">
                        <img class="momend-carousel-picture" alt="momend picture" src="{{ STATIC_URL }}img/carousel1.jpg" />
                    </div>
                    <div class="item homepage-carousel-item">
                        <img class="momend-carousel-picture" alt="momend picture" src="{{ STATIC_URL }}img/carousel5.jpg" />
                    </div>
                    <div class="item homepage-carousel-item">
                        <img class="momend-carousel-picture" alt="momend picture" src="{{ STATIC_URL }}img/carousel2.jpg" />
                    </div>
                    <div class="item homepage-carousel-item">
                        <img class="momend-carousel-picture" alt="momend picture" src="{{ STATIC_URL }}img/carousel3.jpg" />
                    </div>
                </div>
                <!-- Carousel navigation -->
                <a class="carousel-control left" href="#carousel" data-slide="prev"></a>
                <a class="carousel-control right" href="#carousel" data-slide="next"></a>

            </div>
            <div class="row">
                <div>
                    <a class="button large orange offset1 span10" style="text-align: center;margin-left: 8.4%" onclick="showCreateModal()"><i class="icon-magic"></i> Get yours now!</a>
                </div>
            </div>

            <hr />

            <div id="portfolio">
                {% if user.is_authenticated %}
                    <!-- portfolio filter -->
                    <ul id="portfolio-filter" class="nav nav-tabs">
                        <li class="active"><a href="#" class="filter" data-filter=".user">My Momends</a></li>
                        <li><a href="#" class="filter" data-filter=".public">Public Momends</a></li>
                    </ul>
                {% endif %}
                <!-- portfolio items -->
                <section class="row" id="portfolio-items">
                    {% for momend in public_top_momends %}
                        <!-- portfolio item-->
                        <article class="project {% cycle 'span6' 'span6' 'span4' 'span4' 'span4' 'span3' 'span3' 'span3' 'span3'%}" data-tags="public">

                            <div class="thumbnail link">
                                <!-- image -->
                                <a href="{% url 'momends:show-momend' 'm' momend.id %}" title="{{ momend.name }}">
                                    <img alt="{{ momend.name }}" {% if momend.thumbnail %}src="{{ MOMEND_FILE_URL }}{{ momend.thumbnail }}" {% endif %} />
                                </a>
                                <!-- description -->
                                <div class="project-description">
                                    <!-- icon -->
                                    <i class="icon-magic"></i>
                                    <!-- name -->
                                    <b class="project-name">{{ momend.name }}</b>
                                </div>
                            </div>

                        </article>
                        <!-- end portfolio item-->
                    {% endfor %}
                    {% for momend in user_top_momends %}
                        <!-- portfolio item-->
                        <article class="project {% cycle 'span6' 'span6' 'span4' 'span4' 'span4' 'span3' 'span3' 'span3' 'span3'%}" data-tags="user">

                            <div class="thumbnail link">
                                <!-- image -->
                                <a href="{% url 'momends:show-momend' 'm' momend.id %}" title="{{ momend.name }}">
                                    <img alt="{{ momend.name }}" {% if momend.thumbnail %}src="{{ MOMEND_FILE_URL }}{{ momend.thumbnail }}" {% endif %} />
                                </a>
                                <!-- description -->
                                <div class="project-description">
                                    <!-- icon -->
                                    <i class="icon-magic"></i>
                                    <!-- name -->
                                    <b class="project-name">{{ momend.name }}</b>
                                </div>
                            </div>

                        </article>
                        <!-- end portfolio item-->
                    {% endfor %}
                </section>
            </div>

        </div>
    </div>

    <!-- Create Modal -->
    <div id="create-modal" class="modal hide fade span9" tabindex="-1" role="dialog" aria-labelledby="create-modal" aria-hidden="true">
        <form class="form-horizontal" method="post" action="">{% csrf_token %}

            <div class="modal-body">

                <div class="span4">
                    <ul class="nav nav-tabs modal-nav-tabs"> <!-- Tab titles -->
                        <li class="active"><a href="#fb" data-toggle="tab">Facebook</a></li>
                        <li><a href="#tw" data-toggle="tab">Twitter</a></li>
                        <li><a href="#upload" data-toggle="tab">Local</a></li>
                    </ul>

                    <div class="tab-content" style="margin: 0;"> <!--Tab contents -->
                        <div class="tab-pane active" id="fb" style="overflow: auto;max-height: 200px;"> <!-- Facebook thumbnails -->
                            <div class="section-header">Photo Albums</div>
                            <div class="thumb-container">
                                <ul class="thumbnails">
                                    <li class="span1">
                                        <a href="#" class="thumbnail create-thumb">
                                            <img data-src="holder.js/300x200" alt="">
                                        </a>
                                    </li>
                                    <li class="span1">
                                        <a href="#" class="thumbnail create-thumb">
                                            <img data-src="holder.js/300x200" alt="">
                                        </a>
                                    </li>
                                    <li class="span1">
                                        <a href="#" class="thumbnail create-thumb">
                                            <img data-src="holder.js/300x200" alt="">
                                        </a>
                                    </li>
                                    <li class="span1">
                                        <a href="#" class="thumbnail create-thumb">
                                            <img data-src="holder.js/300x200" alt="">
                                        </a>
                                    </li>
                                    <li class="span1">
                                        <a href="#" class="thumbnail create-thumb">
                                            <img data-src="holder.js/300x200" alt="">
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="tab-pane" id="tw">
                            <label for="hashtag">Hashtag</label>
                            <input type="text" id="hashtag">
                        </div>
                        <div class="tab-pane" id="upload">Not Ready Yet!</div>
                    </div>
                </div>

                <div class="span3" style="margin-top: 50px"> <!--From: To: etc. -->
                    <label for="id_momend_name" style="width: 50px">Name:</label>
                    {{ form.momend_name }}

                    <label for="id_start_date" style="width: 50px">From:</label>
                    {{ form.start_date }}
                    <a class="btn" style="vertical-align: top" href="#"><i class="icon-calendar"></i></a>

                    <label for="id_finish_date"style="width: 50px">To:</label>
                    {{ form.finish_date }}
                    <a class="btn" href="#" style="vertical-align: top"><i class="icon-calendar"></i></a>
                    <label for="id_privacy_type"style="width: 50px">Privacy:</label>
                    {{ form.privacy_type }}
                    <label for="id_momend_theme"style="width: 50px">Theme:</label>
                    {{ form.momend_theme }}
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                <button class="btn btn-primary" type="submit">Create</button>
            </div>
        </form>

    </div>
{% endblock content %}
{% block scripts %}
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
    <script>
        $('body').ready(function(){
            $('#portfolio-items').isotope({filter: '.user'}); //Filter thumbnails for .user
            $('.carousel').carousel({interval: 15000})
            if(swfobject.hasFlashPlayerVersion("8")){
                var params = { allowScriptAccess: "always" };
                var atts = { id: "ytvideo" ,
                            wmode:"transparent"};
                swfobject.embedSWF("http://www.youtube.com/v/dVZpm0okAH8?showinfo=0&controls=0&rel=0&&enablejsapi=1", "video_container", "515", "306", "8",null,null,params,atts);
            }
        });
        function onYouTubePlayerReady(playerId) {
            ytplayer = document.getElementById("ytvideo");
            ytplayer.addEventListener("onStateChange", "onytplayerStateChange");
        }
        function showCreateModal(){
            var _modal = $('#create-modal');
            _modal.css('margin-left',_modal.outerWidth()/-2);
            _modal.modal();
            ytplayer.pauseVideo();
        }
        function onytplayerStateChange(newState) {
            if(newState==0){ //Video finished
                $('#carousel').carousel('cycle');
            }
            if(newState==1){
                $('#carousel').carousel('pause');
            }
        }
    </script>
{% endblock scripts %}
